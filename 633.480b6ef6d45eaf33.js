"use strict";(self.webpackChunkobservable_store=self.webpackChunkobservable_store||[]).push([[633],{9633:(U,c,s)=>{s.r(c),s.d(c,{OrdersModule:()=>M});var d=s(6895),p=s(433),h=s(4466),i=s(3329),r=s(8256),O=s(5762),u=s(9646),f=s(2843),m=s(4004),g=s(262),v=s(529);let y=(()=>{class t extends O.C{constructor(e){super({trackStateHistory:!0}),this.http=e,this.apiUrl="assets/orders.json"}fetchOrders(){return this.http.get(this.apiUrl).pipe((0,m.U)(e=>(this.setState({orders:e},l.GetOrders),console.log(this.stateHistory),e)),(0,g.K)(this.handleError))}getAll(){let e=this.getState();return e&&e.orders?(0,u.of)(e.orders):this.fetchOrders()}get(e){let n=this.getState();return n&&n.orders?(console.log(this.stateHistory),(0,u.of)(this.filterOrders(e,n.orders))):this.fetchOrders().pipe((0,m.U)(a=>this.filterOrders(e,a)))}filterOrders(e,n){return n.filter(a=>+a.customerId===e)}handleError(e){if(console.error("server error:",e),e.error instanceof Error){const n=e.error.message;return(0,f._)(()=>new Error(n))}return(0,f._)(()=>e||new Error("Server error"))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(v.eN))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=(()=>((l||(l={})).GetOrders="get_orders",l))();function C(t,o){if(1&t&&(r.TgZ(0,"tr")(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.ALo(5,"currency"),r.qZA()()),2&t){const e=o.$implicit;r.xp6(2),r.Oqu(e.productName),r.xp6(2),r.Oqu(r.Dn7(5,2,e.itemCost,"USD","symbol"))}}function S(t,o){if(1&t&&(r.TgZ(0,"table",3),r.YNc(1,C,6,6,"tr",4),r.qZA()),2&t){const e=o.$implicit;r.xp6(1),r.Q6J("ngForOf",e.orderItems)}}function A(t,o){if(1&t&&(r.TgZ(0,"div")(1,"h1"),r._uU(2,"Orders"),r.qZA(),r.YNc(3,S,2,1,"table",2),r.qZA()),2&t){const e=o.ngIf;r.xp6(3),r.Q6J("ngForOf",e)}}const Z=[{path:"",component:(()=>{class t{constructor(e,n){this.ordersService=e,this.route=n}ngOnInit(){const e=Number(this.route.snapshot.paramMap.get("id"));this.orders$=this.ordersService.get(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(y),r.Y36(i.gz))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-orders"]],decls:5,vars:3,consts:[[4,"ngIf"],["routerLink","/customers"],["class","table table-hover orders-table",4,"ngFor","ngForOf"],[1,"table","table-hover","orders-table"],[4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(r.YNc(0,A,4,1,"div",0),r.ALo(1,"async"),r._UZ(2,"br"),r.TgZ(3,"a",1),r._uU(4,"View All Customers"),r.qZA()),2&e&&r.Q6J("ngIf",r.lcZ(1,1,n.orders$))},dependencies:[d.sg,d.O5,i.yS,d.Ov,d.H9],styles:[".orders-table[_ngcontent-%COMP%]{margin-top:20px}"]}),t})()}];let F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[i.Bz.forChild(Z),i.Bz]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[d.ez,p.u5,h.m,F]}),t})()}}]);